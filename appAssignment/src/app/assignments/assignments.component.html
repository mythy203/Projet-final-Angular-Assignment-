<main class="container">

    <nav>   
        <button mat-flat-button 
                color="primary"
                (click)="peuplerBD()" [disabled]="isPeuplementEnCours">Peupler la Base de Données</button>

    </nav>

    <table mat-table [dataSource]="assignments" matSort >

        <!-- Ligne d'en-tête fixe -->
        <tr mat-header-row class="mat-header-row-fixed" *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
        
       
        <!-- Colonne pour le nom -->
        <ng-container matColumnDef="nom">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
          <td mat-cell *matCellDef="let assignment">{{ assignment.nom }}</td>
        </ng-container>
    
        <!-- Colonne pour la date de rendu -->
        <ng-container matColumnDef="dateDeRendu">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Date de Rendu</th>
          <td mat-cell *matCellDef="let assignment">{{ assignment.dateDeRendu | date }}</td>
        </ng-container>
    
        <!-- Colonne pour le statut de rendu -->
        <ng-container matColumnDef="rendu">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Statut</th>
          <td mat-cell *matCellDef="let assignment">
            <span class="rendu" *ngIf="assignment.rendu; else nonRendu">Rendu</span>
            <ng-template #nonRendu>Non Rendu</ng-template>
          </td>
        </ng-container>

    
        <!-- Définition des colonnes -->
        <!-- <tr mat-header-row class="mat-header-row-fixed" *matHeaderRowDef="columnsToDisplay"></tr> -->
        <!-- ajouter routerLink pour chaque fois, on clique une ligne, il affiche le détail du devoir -->
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay" [routerLink]="['/assignment', row.id]"></tr>

      </table>
    
      <!-- Pagination -->
      <mat-paginator [length]="totalDocs"
                     [pageSize]="limit"
                     [pageSizeOptions]="[5, 10, 20]"
                     [pageIndex]="page - 1"
                     (page)="handlePageEvent($event)">
      </mat-paginator>
    <!-- <nav><a routerLink="/add">
            <button class="ajouterBtn" mat-flat-button color="accent">
                Ajouter un devoir
            </button> -->

        <!-- </a></nav> -->
        <!-- 
        <nav>
            <button mat-flat-button (click)="goToFirstPage()" [disabled]="page === 1">Première Page</button>
            <button mat-flat-button (click)="goToPrevPage()" [disabled]="page === 1">Page Précédente</button>
            <span>Page {{ page }} sur {{ totalPages }}</span>
            <button mat-flat-button (click)="goToNextPage()" [disabled]="page === totalPages">Page Suivante</button>
            <button mat-flat-button (click)="goToLastPage()" [disabled]="page === totalPages">Dernière Page</button>
          </nav> -->
        
          <!-- <mat-paginator
            [length]="totalDocs"
            [pageSize]="limit"
            [pageSizeOptions]="[5, 10, 20]"
            [pageIndex]="page - 1"
            (page)="handlePageEvent($event)"
          ></mat-paginator>
         -->
    <!-- <mat-paginator  [length]="totalDocs"
                    [pageSize]="limit"
                    [pageSizeOptions]="[5, 10, 20]"
                    [pageIndex]="page - 1"
                    (page)="handlePageEvent($event)">
    </mat-paginator> -->
    <!-- <mat-list *ngFor="let assignment of assignments">
        <nav><a routerLink="/assignment/{{assignment.id}}">
                <h3 mat-subheader> Date de rendu: {{assignment.dateDeRendu|date}}</h3>
                <mat-list-item>
                    <p appRendu *ngIf="assignment.rendu; else nonsoumis">
                        Devoir intitulé {{assignment.nom}} a été rendu.
                    </p>
                    <ng-template #nonsoumis>
                        <p>Le devoir {{assignment.nom}} n'a pas été rendu.</p>
                    </ng-template>
                </mat-list-item>
                <mat-divider></mat-divider>
            </a></nav>
    </mat-list> -->
    
      
</main>



